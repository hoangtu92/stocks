<?php

use App\Agent;
use App\Crawler\DLExcludeFilter;
use App\Crawler\DLIncludeFilter;
use App\Crawler\DailyTradingInfo;
use Illuminate\Support\Facades\Route;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get("/", "FrontController@order")->name("order");
Route::get('/data/{date?}', "FrontController@data")->name("data");
Route::get('/general/{date?}', "FrontController@generalStock")->name("general");

Route::get('/crawl/data/{date?}', "StockController@crawlData")->name("crawl_data_by_date");
Route::get("/crawl/order/{key}/{date?}", "StockController@crawlOrder")->name("crawl_order");
Route::get('/crawl/arav/{date?}', "StockController@crawlArav")->name("crawl_arav");
Route::get('/crawl/dl/{date?}', "StockController@crawlDl")->name("crawl_dl");
Route::get('/crawl/xz/{date?}', "StockController@crawlXZ")->name("crawl_xz");
Route::get('/crawl/agency/{date?}', "StockController@crawlAgency")->name("crawl_agency");

Route::get('/crawl/generalStock/{filter_date?}/{key?}', "StockController@crawlGeneralStock")->name("general_stock");
Route::get('/crawl/generalStockToday/{key}', "StockController@crawlGeneralStockToday")->name("general_stock_today");
Route::get('/crawl/generalStockFinal/{date}', "StockController@crawlGeneralStockFinal")->name("general_stock_final");

Route::get("/crawl/reAgency", "StockController@reCrawlAgency")->name("re_crawl_agency");
Route::post("/update_general_predict", "ActionController@update_general_predict")->name("update_general_predict");
Route::get("/import/agent", function (){
    $agents = [
        "元大",
        "元大-竹科",
        "統一",
        "凱基-岡山",
        "元大-新竹",
        "凱基-松山",
        "凱基-北門",
        "永豐金-萬盛",
        "元大-土城永寧",
        "港商野村",
        "富邦",
        "統一元大",
        "兆豐-城中",
        "凱基-松山",
        "元大-大里德芳",
        "兆豐-虎尾",
        "元富-永和",
        "統一-南京",
        "統一",
        "元大-士林",
        "統一-南京",
        "統一",
        "統一-南京",
        "元大",
        "元大-林森",
        "國票-安和",
        "統一-南京",
        "永豐金-員林",
        "國票-博愛",
        "凱基-岡山",
        "凱基-板橋",
        "宏遠-中和",
        "永豐金-虎尾",
        "富邦-建國",
        "元富-大昌",
        "兆豐-松德",
        "統一-嘉義",
        "凱基-斗六",
        "元大-大同",
        "永豐金-信義",
        "富邦-南屯",
        "兆豐",
        "凱基-松山",
        "凱基-大直",
        "兆豐-松德",
        "元大-土城永寧",
        "港商野村",
        "富邦-建國",
        "統一",
        "統一",
        "統一",
        "富邦-建國",
        "統一-仁愛",
        "統一",
        "群益金鼎",
        "元大-土城永寧",
        "富邦-建國",
        "凱基-松山",
        "凱基-松山",
        "兆豐-新竹",
        "富邦-建國",
        "兆豐-新竹",
        "永豐金-中盛",
        "國票-敦北法人",
        "兆豐",
        "兆豐-城中",
        "國票-敦北法人",
        "元大-土城永寧",
        "統一",
        "凱基-松山",
        "元大-新營",
        "康和-仁愛",
        "富邦-台北",
        "國泰-館前",
        "第一金-嘉義",
        "元富-台中",
        "凱基-信義",
        "國票-敦北法人",
        "凱基-復興",
        "兆豐-城中",
        "富邦",
        "元大-土城永寧",
        "群益金鼎-敦南",
        "元大-士林",
        "統一-板橋",
        "元大-竹科",
        "元富-松德",
        "元大-竹科",
        "元大-天母",
        "凱基-嘉義",
        "群益金鼎-台北",
        "富邦-板橋",
        "凱基-城中",
        "國票-敦北法人",
        "凱基-城中",
        "統一",
        "兆豐-埔墘",
        "永豐金-信義",
        "華南永昌-南京",
        "富邦-嘉義",
        "國票-長城",
        "國票-安和",
        "凱基-信義",
        "國泰-敦南",
        "凱基-市政",
        "華南永昌-高雄",
        "元大-淡水",
        "國泰-敦南",
        "富邦-板橋",
        "國票-中正",
        "元大-竹科",
        "群益金鼎-大安",
        "兆豐-城中",
        "富邦",
        "元大",
        "富邦-敦南",
        "國票-彰化",
        "凱基",
        "元大-土城永寧",
        "凱基-松山",
        "富邦-建國",
        "富邦",
        "富邦-嘉義",
        "統一",
        "兆豐-新竹",
        "富邦-台北",
        "兆豐-虎尾",
        "富邦-虎尾",
        "凱基-岡山",
        " 統一",
        "元大-龍潭",
        "統一",
        "元大-西螺",
        "凱基-岡山",
        "永豐金-竹科",
        "元大-林森",
        "富邦",
        "富邦",
        "凱基-永和",
        "兆豐-城中",
        "凱基-台北",
        "元大-嘉義",
        "國票-南崁",
        "富邦-嘉義",
        "元大-竹科",
        "凱基-台北",
        "兆豐-新竹",
        "凱基-台北",
        "凱基-市政",
        "富邦-嘉義",
        "元大-大天母",
        "群益金鼎-經國",
        "兆豐-新竹",
        "元大",
        "兆豐-南京",
        "富邦-嘉義",
        "凱基-北門",
        "富邦",
        "兆豐",
        "統一",
        "富邦-嘉義",
        "元大-士林",
        "永豐金-苓雅",
        "元大-竹科",
        "統一-仁愛",
        "凱基-岡山",
        "國票-敦北法人",
        "統一-新竹",
        "元大-土城永寧",
        "富邦",
        "富邦-台北",
        "康和-嘉義",
        "元富-延平",
        "元大-清水",
        "富邦-虎尾",
        "港商野村",
        "日盛-信義",
        "富邦-虎尾",
        "富邦",
        "元大",
        "元大-土城永寧",
        "凱基-北門",
        "康和",
        "統一",
        "元大",
        "富邦-建國",
        "日盛",
        "富邦-建國",
        "康和",
        "國票-安和",
        "富邦",
        "群益金鼎-內湖",
        "統一",
        "凱基-復興",
        "元大",
        "元富-城中",
        "兆豐-永和",
        "凱基-大直",
        "富邦-建國",
        "統一",
        "國票-敦北法人",
        "富邦",
        "富邦-建國",
        "統一",
        "兆豐",
        "富邦-嘉義",
        "國票-敦北法人",
        "元大-台北",
        "兆豐-虎尾",
        "富邦",
        "國票-敦北法人",
        "元大-和平",
        "群益金鼎-民權",
        "統一-板橋",
        "國泰-台中",
        "統一",
        "統一-嘉義",
        "港商野村",
        "兆豐-城中",
        "國票-安和",
        "兆豐-虎尾",
        "富邦-嘉義",
        "元大",
        "國票-彰化",
        "元大",
        "富邦",
        "康和",
        "凱基-信義",
        "元大-林森",
        "凱基-台北",
        "新加坡商瑞銀",
        "元大",
        "凱基-北門",
        "富邦-建國",
        "統一",
        "國票-安和",
        "統一",
        "富邦",
        "元大",
        "永豐金-信義",
        "統一",
        "元大 ",
        "國票-彰化",
        "元大-林森",
        "統一-嘉義",
        "光和-虎尾",
        "港商野村",
        "國票-敦北法人",
        "元大-土城永寧",
        "元大-土城永寧",
        "港商野村",
        "元大",
        "統一",
        "富邦",
        "元大",
        "元富-台中",
        "元大-土城永寧",
        "國票-安和",
        "富邦-台北",
        "凱基-北門",
        "康和",
        "統一-仁愛",
        "國票",
        "元大-嘉義",
        "統一-基隆",
        "日盛-忠孝",
        "富邦-左營",
        "元大-博愛",
        "凱基-北門",
        "富邦",
        "凱基-斗六",
        "凱基-北門",
        "富邦-建國",
        "康和",
        "元大",
        "富邦",
        "兆豐-城中",
        "元大-土城永寧",
        "元大-西螺",
        "凱基-岡山",
        "元大-西屯",
        "合庫-高雄",
        "日盛-信義",
        "元大-土城永寧",
        "統一",
        "凱基-信義",
        "元大-士林",
        "凱基-岡山",
        "國票-安和",
        "統一-南京",
        "凱基-松山",
        "富邦-台北",
        "國票-安和",
        "凱基-台北",
        "富邦",
        "統一",
        "致和-府前",
        "兆豐-虎尾",
        "富邦-建國",
        "凱基-台北",
        "永豐金",
        "元大-土城永寧",
        "凱基-北門",
        "兆豐",
        "永豐金",
        "元大-土城永寧",
        "凱基-台北",
        "凱基-松山",
        "統一",
        "凱基-士林",
        "統一-板橋",
        "群益金鼎-大興",
        "凱基-市府",
        "富邦-花蓮",
        "永豐金-市政",
        "統一",
        "凱基-岡山",
        "統一",
        "元富-成功",
        "元富-文心",
        "凱基-岡山",
        "國票-彰化",
        "凱基-台北",
        "統一",
        "統一",
        "國票",
        "元大-士林",
        "凱基-台北",
        "凱基-台北",
        "國票-敦北法人",
        "統一",
        "元大-竹科",
        "凱基-台北",
        "統一-南京",
        "國票-安和",
        "統一-嘉義",
        "元大-竹科",
        "統一",
        "凱基-台北",
        "統一-南京",
        "康和",
        "元富-永和",
        "日盛-文化",
        "國票-彰化",
        "凱基-內湖",
        "統一-土城",
        "凱基-板橋",
        "兆豐-埔墘",
        "統一",
        "富邦-南屯",
        "凱基-岡山",
        "華南永昌-高雄",
        "群益金鼎-永和",
        "富邦-高雄",
        "兆豐",
        "凱基-信義",
        "元大-竹科",
        "元大-古亭",
        "華南永昌-大安",
        "統一",
        "統一",
        "元大-中和",
        "凱基-竹科",
        "兆豐-城中",
        "統一",
        "統一",
        "富邦",
        "元大-士林",
        "凱基-岡山",
        "元富-新興",
        "統一",
        "凱基-台北",
        "兆豐-城中",
        "富邦",
        "富邦-嘉義",
        "元富-四維",
        "富邦-南屯",
        "凱基-永和",
        "富邦",
        "元大-大同",
        "元富-永和",
        "康和",
        "國票-安和",
        "元大-土城永寧",
        "康和",
        "富邦",
        "統一",
        "富邦-台北",
        "康和",
        "元大-林森",
        "統一-嘉義",
        "國票-安和",
        "富邦-台北",
        "兆豐-東門",
        "凱基-台北",
        "元大-中和",
        "凱基-永和",
        "富邦",
        "富邦-南屯",
        "富邦-建國",
        "凱基-松山",
        "元大",
        "國票-安和",
        "元富-永和",
        "凱基-岡山",
        "統一",
        "凱基",
        "統一",
        "富邦-竹北",
        "富邦",
        "群益金鼎",
        "港商野村",
        "元大",
        "統一",
        "群益金鼎",
        "凱基-板橋",
        "統一",
        "元富-四維",
        "群益金鼎-基隆",
        "永豐金-信義",
        "富邦",
        "元大-林森",
        "元大",
        "富邦-建國",
        "康和",
        "元大-士林",
        "凱基-永和",
        "日盛-嘉義",
        "元大-竹科",
        "元大-新竹.統一.凱基-大直",
        "凱基-松山",
        "富邦-建國",
        "康和-板橋",
        "富邦",
        "統一-南京",
        "富邦-台中",
        "統一",
        "凱基-永和",
        "凱基-嘉義",
        "統一-嘉義",
        "凱基-台北",
        "國票-長城",
        "統一",
        "富邦-台中",
        "統一",
        "永豐金-信義",
        "永豐金-嘉義",
        "統一",
        "兆豐-城中",
        "凱基-虎尾",
        "凱基-台北",
        "元大-竹科",
        "統一-嘉義",
        "兆豐-城中",
        "元大-土城永寧",
        "凱基-信義",
        "凱基-台北",
        "凱基-永和",
        "元大-信義",
        "元大",
        "兆豐-城中",
        "統一",
        "凱基-台北",
        "兆豐",
        "富邦-建國",
        "元大",
        "永豐金-松山",
        "華南永昌-高雄",
        "凱基-台北",
        "統一-嘉義",
        "富邦-高雄",
        "富邦-嘉義",
        "富邦",
        "華南永昌-南京",
        "港商野村",
        "兆豐-城中",
        "凱基-台北",
        "致和-台北",
        "元大-土城永寧",
        "港商野村",
        "元大",
        "統一",
        "兆豐-城中",
        "兆豐",
        "富邦-敦南",
        "凱基-市府",
        "富邦-南屯",
        "凱基-市政",
        "富邦",
        "元大-士林",
        "統一-板橋",
        "統一-南京",
        "凱基-松山",
        "凱基-台北",
        "元大-土城永寧",
        "群益金鼎-敦南",
        "國票-敦北法人",
        "凱基-台北",
        "凱基-板橋",
        "統一",
        "富邦",
        "元大-土城永寧",
        "凱基-台北",
        "元大",
        "凱基-北門",
        "兆豐",
        "凱基-台北",
        "元大",
        "富邦-建國",
        "富邦",
        "元大-土城永寧",
        "統一",
        "兆豐-城中",
        "群益金鼎",
        "統一-南京",
        "國票-安和",
        "富邦-敦南",
        "凱基-台北",
        "統一",
        "兆豐-虎尾",
    ];

    foreach (array_unique($agents) as $agent){
        $ag = Agent::where("name", $agent)->first();
        if(!$ag){
            Agent::create([
                "name" => $agent
            ]);
        }
    }
});


Route::get("/t/t", "StockController@reCrawlOrder");
